<?xml version="1.0"?>
<launch>

    <!-- arguments -->
    <arg name="domain_path"        default="$(find rosplan_planning_system)/common/rosplan_planning_system/domain_robot_delivery.pddl" />
    <arg name="robust_domain_path" default="$(find rosplan_planning_system)/common/rosplan_planning_system/domain_robot_delivery_robust.pddl" />
    <arg name="init_problem_path"  default="$(find rosplan_planning_system)/common/rosplan_planning_system/problem_g01_w05.pddl" /> 
    <arg name="problem_path"       default="$(find rosplan_planning_system)/common/rosplan_planning_system/problem_g01_w05_ROSPlan.pddl" />
    <arg name="max_parameters"     default="1" />
    <arg name="stn_timeout"        default="60" />

    <!-- knowledge base -->
    <node name="rosplan_knowledge_base" pkg="rosplan_knowledge_base" type="knowledgeBase" respawn="false" output="screen">
        <param name="domain_path"   value="$(arg domain_path)" />
        <param name="problem_path"  value="$(arg init_problem_path)" />
        <param name="database_path" value="$(find rosplan_knowledge_base)/common/mongoDB/" />
        <param name="use_unknowns"  value="false" />
    </node>

    <!-- problem generation -->
    <include file="$(find rosplan_planning_system)/launch/includes/problem_interface.launch">
        <arg name="domain_path"      value="$(arg domain_path)" />
        <arg name="problem_path"     value="$(arg problem_path)" />
    </include>

     <!-- planner interface -->
     <include file="$(find rosplan_planning_system)/launch/includes/planner_interface.launch">
         <arg name="domain_path"          value="$(arg domain_path)" />
         <arg name="problem_path"         value="$(arg problem_path)" />
         <arg name="data_path"            value="$(find rosplan_planning_system)/common/rosplan_planning_system" />
         <arg name="planner_command"      value="timeout 120 $(find rosplan_planning_system)/common/bin/popf DOMAIN PROBLEM" />
     </include>

    <!-- plan parsing -->
    <include file="$(find rosplan_planning_system)/launch/includes/parsing_interface.launch">
         <arg name="epsilon_time" value="10.0" />
    </include>

    <!-- STN_tool-->
    <include file="$(find rosplan_planning_system)/launch/includes/stn_tool.launch">
        <arg name="robust_domain_path" value="$(arg robust_domain_path)" />
        <arg name="problem_path"       value="$(arg problem_path)" />
        <arg name="max_parameters"       value="$(arg max_parameters)" />
        <arg name="stn_timeout"       value="$(arg stn_timeout)" />
    </include>

    <!-- plan dispatch -->
    <include file="$(find rosplan_planning_system)/launch/includes/dispatch_interface.launch">
        <arg name="plan_topic" value="/rosplan_parsing_interface/complete_plan" />
        <arg name="display_edge_type"     value="false" />
    </include>

    <!-- sim actions -->

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="goto_waypoint" />
        <arg name="action_duration" value="5" />
        <!--arg name="action_duration_stddev" value="5" /-->
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="localise" />
        <arg name="action_duration" value="5" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="dock" />
        <arg name="action_duration" value="5" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="undock" />
        <arg name="action_duration" value="5" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="ask_unload" />
        <arg name="action_duration" value="4" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="wait_load_at_printer" />
        <arg name="action_duration" value="17" />
        <arg name="action_duration_stddev" value="5" />
        <arg name="action_probability" value="0.75" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="wait_unload" />
        <arg name="action_duration" value="13" />
        <arg name="action_duration_stddev" value="5" />
        <arg name="action_probability" value="0.75" />
    </include>

    <include file="$(find rosplan_planning_system)/launch/includes/simulated_action.launch" >
        <arg name="pddl_action_name" value="ditch" />
        <arg name="action_duration" value="1" />
    </include>
</launch>



